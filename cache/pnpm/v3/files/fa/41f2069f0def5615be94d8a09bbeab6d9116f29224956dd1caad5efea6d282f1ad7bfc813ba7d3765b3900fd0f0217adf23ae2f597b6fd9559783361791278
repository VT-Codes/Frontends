const a1_0x1adb=['forEach','error','CloudEnabledLifeCycle','DISTRIBUTED_TASK_EXECUTION_INTERNAL_ERROR_STATUS_CODE','subscribe','map','Subject','CloudRemoteCache','../../file-storage/e2e-encryption','./cloud-remote-cache','EndOfRunMessage','filter','printCacheHitsMessage','./cloud-run.api','maskedProperties','../../../utilities/nx-imports','note','anyErrors','done','encryptionKey','CloudRunApi','NX_CLOUD_DISTRIBUTED_EXECUTION_ID','./node_modules/.cache/nx','rxjs/internal/Subject','exit','MessageReporter','printMessages','../../terminal-output/message-reporter','catch','ENCRYPTION_KEY','E2EEncryption','cloudEnabledTasksRunner','FileStorage','scan','obfuscate','value','parseCommand','getMachineInfo','submitRunMetrics','toISOString','skipNxCache','throw','hash','./cloud-enabled-life-cycle','Agent\x20wasn\x27t\x20able\x20to\x20record\x20its\x20run','__esModule','stringify','cacheableOperations','assign','Executed\x20tasks\x20with\x20hashes:\x20','taskId','defineProperty','startRun','waitForStoreRequestsToComplete','VERBOSE_LOGGING','apply','__awaiter','lifeCycle','endRun','all','../../terminal-output/output-obfuscator','path','cacheDirectory','next','getRunGroup','AGENT_RUNNING_IN_DISTRIBUTED_EXECUTION','Agent\x20wasn\x27t\x20able\x20to\x20store\x20artifacts','getBranch'];(function(_0x22cd4b,_0x1adb84){const _0x301c75=function(_0x2b1a0f){while(--_0x2b1a0f){_0x22cd4b['push'](_0x22cd4b['shift']());}};_0x301c75(++_0x1adb84);}(a1_0x1adb,0xf6));const a1_0x301c=function(_0x22cd4b,_0x1adb84){_0x22cd4b=_0x22cd4b-0x0;let _0x301c75=a1_0x1adb[_0x22cd4b];return _0x301c75;};'use strict';var __awaiter=this&&this[a1_0x301c('0xe')]||function(_0xbf51cd,_0x189c63,_0x3b7d2f,_0x598fdb){function _0x3f5b2c(_0x1ecd13){return _0x1ecd13 instanceof _0x3b7d2f?_0x1ecd13:new _0x3b7d2f(function(_0x375e9b){_0x375e9b(_0x1ecd13);});}return new(_0x3b7d2f||(_0x3b7d2f=Promise))(function(_0xb49f0d,_0x3c6f9e){function _0x5ab366(_0x3f32ab){try{_0x314def(_0x598fdb[a1_0x301c('0x15')](_0x3f32ab));}catch(_0x4c38ee){_0x3c6f9e(_0x4c38ee);}}function _0x5a4051(_0x10c43d){try{_0x314def(_0x598fdb[a1_0x301c('0x43')](_0x10c43d));}catch(_0x8797ac){_0x3c6f9e(_0x8797ac);}}function _0x314def(_0x501d13){_0x501d13[a1_0x301c('0x2c')]?_0xb49f0d(_0x501d13[a1_0x301c('0x3d')]):_0x3f5b2c(_0x501d13[a1_0x301c('0x3d')])['then'](_0x5ab366,_0x5a4051);}_0x314def((_0x598fdb=_0x598fdb[a1_0x301c('0xd')](_0xbf51cd,_0x189c63||[]))['next']());});};Object[a1_0x301c('0x9')](exports,a1_0x301c('0x3'),{'value':!![]});exports[a1_0x301c('0x39')]=void 0x0;const Subject_1=require(a1_0x301c('0x31'));const message_reporter_1=require(a1_0x301c('0x35'));const end_of_run_message_1=require('../../terminal-output/end-of-run-message');const output_obfuscator_1=require(a1_0x301c('0x12'));const cloud_enabled_life_cycle_1=require(a1_0x301c('0x1'));const file_storage_1=require('../../file-storage/file-storage');const e2e_encryption_1=require(a1_0x301c('0x22'));const environment_1=require('../../../utilities/environment');const cloud_remote_cache_1=require(a1_0x301c('0x23'));const cloud_run_api_1=require(a1_0x301c('0x27'));const fs_1=require('fs');const path=require(a1_0x301c('0x13'));const metric_logger_1=require('../../../utilities/metric-logger');const {tasksRunnerV2,output}=require(a1_0x301c('0x29'));function createApi(_0x1407e9,_0x21e440,_0x5aa263){const _0x475c09=(0x0,environment_1[a1_0x301c('0x3f')])(_0x21e440);return new cloud_run_api_1[(a1_0x301c('0x2e'))](_0x1407e9,_0x5aa263,_0x21e440,_0x475c09);}function storeTaskHashes(_0x1f4751,_0xf756,_0x1f4038){const _0x173ae8=JSON[a1_0x301c('0x4')](_0x1f4751[a1_0x301c('0x1f')](_0x45d795=>({'taskId':_0x45d795[a1_0x301c('0x8')],'hash':_0x45d795[a1_0x301c('0x0')]})));if(environment_1[a1_0x301c('0xc')]){output[a1_0x301c('0x2a')]({'title':a1_0x301c('0x7')+_0x173ae8});}(0x0,fs_1['writeFileSync'])(path['join'](_0xf756,'tasks-hashes-'+_0x1f4038),_0x173ae8);}function onComplete(_0x2261b6,_0x293d4c,_0x55ac9c,_0x39f2e,_0x36f7f0,_0x30dd03,_0x521cf7,_0x15e931,_0x3b5eb3,_0x1f073c){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x190b1c=new Date()[a1_0x301c('0x41')]();if(environment_1[a1_0x301c('0x17')]){storeTaskHashes(_0x3b5eb3,_0x293d4c[a1_0x301c('0x14')]||a1_0x301c('0x30'),environment_1['NX_CLOUD_DISTRIBUTED_EXECUTION_ID']);}const _0xbd6bc7=(0x0,environment_1[a1_0x301c('0x19')])();const _0xf29b7=yield Promise[a1_0x301c('0x11')]([_0x55ac9c[a1_0x301c('0xb')](),_0x39f2e[a1_0x301c('0x10')]({'command':_0x36f7f0[a1_0x301c('0x3c')]((0x0,environment_1[a1_0x301c('0x3e')])()),'startTime':_0x30dd03,'endTime':_0x190b1c,'distributedExecutionId':environment_1[a1_0x301c('0x2f')],'branch':_0xbd6bc7,'scan':!![],'runGroup':(0x0,environment_1[a1_0x301c('0x16')])(),'sha':_0xbd6bc7?(0x0,environment_1['extractGitSha'])():undefined},_0x3b5eb3)]);if(_0x1f073c){setTimeout(()=>{_0x521cf7[a1_0x301c('0x34')]();if(!_0x521cf7[a1_0x301c('0x2b')]){_0x15e931[a1_0x301c('0x26')]();}},0x0);}else{_0x521cf7['printMessages']();if(!_0x521cf7[a1_0x301c('0x2b')]){_0x15e931[a1_0x301c('0x26')]();}}if(environment_1[a1_0x301c('0x17')]){if(!_0xf29b7[0x0]){output[a1_0x301c('0x1b')]({'title':a1_0x301c('0x18')});_0x521cf7[a1_0x301c('0x34')]();process[a1_0x301c('0x32')](environment_1[a1_0x301c('0x1d')]);}if(!_0xf29b7[0x1]){output[a1_0x301c('0x1b')]({'title':a1_0x301c('0x2')});_0x521cf7['printMessages']();process[a1_0x301c('0x32')](environment_1[a1_0x301c('0x1d')]);}}yield(0x0,metric_logger_1[a1_0x301c('0x40')])(_0x293d4c);});}function createLifeCycle(_0x4320f7,_0x34f7d9,_0x598357,_0x45edc9){const _0x38bb37=new cloud_enabled_life_cycle_1[(a1_0x301c('0x1c'))](_0x4320f7,_0x34f7d9[a1_0x301c('0x14')],!!_0x34f7d9[a1_0x301c('0x42')],_0x34f7d9[a1_0x301c('0x3b')]===undefined?!![]:_0x34f7d9[a1_0x301c('0x3b')],_0x34f7d9[a1_0x301c('0x5')]||[],_0x598357,_0x45edc9);try{const {CompositeLifeCycle}=require(a1_0x301c('0x29'));if(!CompositeLifeCycle)return _0x38bb37;return new CompositeLifeCycle([_0x34f7d9['lifeCycle'],_0x38bb37]);}catch(_0x1e9d60){return _0x38bb37;}}function cloudEnabledTasksRunner(_0x7df617,_0xfc026,_0x5923f4){const _0x2c10b7={'statuses':{},'scheduledTasks':[],'requests':{},'allTasks':_0x7df617};const _0x16a9ae=_0xfc026[a1_0x301c('0xf')]===undefined;const _0x5ee7b4=[];const _0x397f2a=new message_reporter_1[(a1_0x301c('0x33'))](_0xfc026);const _0x34856e=createApi(_0x397f2a,_0xfc026,_0x2c10b7);const _0xef0952=new end_of_run_message_1[(a1_0x301c('0x24'))](_0x2c10b7,_0x5ee7b4);const _0x1ebade=new output_obfuscator_1['OutputObfuscator'](_0xfc026[a1_0x301c('0x28')]);const _0x38110d=_0x7df617['map'](_0x34950a=>_0x34950a['hash'])[a1_0x301c('0x25')](_0xf31f9c=>!!_0xf31f9c);const _0x84d3cb=_0x34856e[a1_0x301c('0xa')](environment_1['NX_CLOUD_DISTRIBUTED_EXECUTION_ID'],_0x38110d);_0x38110d[a1_0x301c('0x1a')](_0x120a3e=>{_0x2c10b7['requests'][_0x120a3e]=_0x84d3cb;});const _0x3c1664=new Date()[a1_0x301c('0x41')]();const _0x5de2e0=createLifeCycle(_0x2c10b7,_0xfc026,_0x1ebade,_0x5ee7b4);const _0x3f4a04=new e2e_encryption_1[(a1_0x301c('0x38'))](environment_1[a1_0x301c('0x37')]||_0xfc026[a1_0x301c('0x2d')]);const _0x5900df=new file_storage_1[(a1_0x301c('0x3a'))](_0x3f4a04);const _0x50e88e=new cloud_remote_cache_1[(a1_0x301c('0x21'))](_0x397f2a,_0x34856e,_0x2c10b7,_0x5900df);delete process['env'][a1_0x301c('0x2f')];const _0x5a39df=tasksRunnerV2(_0x7df617,Object[a1_0x301c('0x6')](Object[a1_0x301c('0x6')]({},_0xfc026),{'remoteCache':_0x50e88e,'lifeCycle':_0x5de2e0}),_0x5923f4);if(_0x5a39df[a1_0x301c('0x1e')]){const _0x1ebb05=new Subject_1[(a1_0x301c('0x20'))]();_0x5a39df[a1_0x301c('0x1e')]({'next':_0x192d87=>_0x1ebb05[a1_0x301c('0x15')](_0x192d87),'error':_0x4c598a=>_0x1ebb05['error'](_0x4c598a),'complete':()=>__awaiter(this,void 0x0,void 0x0,function*(){yield onComplete(_0x5de2e0,_0xfc026,_0x50e88e,_0x34856e,_0x1ebade,_0x3c1664,_0x397f2a,_0xef0952,_0x5ee7b4,_0x16a9ae);_0x1ebb05['complete']();})});return _0x1ebb05;}else{return _0x5a39df['then'](_0x5939e8=>__awaiter(this,void 0x0,void 0x0,function*(){yield onComplete(_0x5de2e0,_0xfc026,_0x50e88e,_0x34856e,_0x1ebade,_0x3c1664,_0x397f2a,_0xef0952,_0x5ee7b4,_0x16a9ae);return _0x5939e8;}))[a1_0x301c('0x36')](_0x20aa8f=>__awaiter(this,void 0x0,void 0x0,function*(){yield onComplete(_0x5de2e0,_0xfc026,_0x50e88e,_0x34856e,_0x1ebade,_0x3c1664,_0x397f2a,_0xef0952,_0x5ee7b4,_0x16a9ae);throw _0x20aa8f;}));}}exports[a1_0x301c('0x39')]=cloudEnabledTasksRunner;