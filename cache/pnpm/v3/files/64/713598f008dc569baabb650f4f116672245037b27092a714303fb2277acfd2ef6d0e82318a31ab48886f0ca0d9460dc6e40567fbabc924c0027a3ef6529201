const a6_0x263a=['false','join','parallel','recordMetric','../../../utilities/environment','__esModule','error','axiosException','getBranch','map','apiAxiosInstance','target','defineProperty','../../../utilities/metric-logger','axiosMultipleTries','data','hash','stopAgentsOnFailure','project','next','dteStatus','message','maxParallel','/nx-cloud/executions/start','createStartRequest','RUNNER_FAILURE_PERF_ENTRY','agentCount','configuration','parseCommand','../../../utilities/axios','/nx-cloud/executions/status','../../../utilities/nx-imports','NX_CLOUD_DISTRIBUTED_EXECUTION_AGENT_COUNT','done','true','then','completeRunGroup','post','createMetricRecorder','throw','apply','createApiAxiosInstance','completeRunGroupWithError','mapRespToPerfEntry','response','status','/nx-cloud/executions/complete-run-group','value','enabled','dteStart','DistributedExecutionApi','NX_CLOUD_DISTRIBUTED_EXECUTION_STOP_AGENTS_ON_FAILURE','overrides'];(function(_0x4503a9,_0x263a8d){const _0x3127b4=function(_0x54906f){while(--_0x54906f){_0x4503a9['push'](_0x4503a9['shift']());}};_0x3127b4(++_0x263a8d);}(a6_0x263a,0x186));const a6_0x3127=function(_0x4503a9,_0x263a8d){_0x4503a9=_0x4503a9-0x0;let _0x3127b4=a6_0x263a[_0x4503a9];return _0x3127b4;};'use strict';var __awaiter=this&&this['__awaiter']||function(_0x179778,_0x4151f9,_0x37acd7,_0xcb38f7){function _0x2257ba(_0x459b96){return _0x459b96 instanceof _0x37acd7?_0x459b96:new _0x37acd7(function(_0x242b60){_0x242b60(_0x459b96);});}return new(_0x37acd7||(_0x37acd7=Promise))(function(_0x21b37f,_0x12e9f9){function _0x4ca5ea(_0x2f1ba0){try{_0x1fe5e4(_0xcb38f7[a6_0x3127('0x0')](_0x2f1ba0));}catch(_0x58e0bd){_0x12e9f9(_0x58e0bd);}}function _0x453839(_0x3c2172){try{_0x1fe5e4(_0xcb38f7[a6_0x3127('0x14')](_0x3c2172));}catch(_0x51285a){_0x12e9f9(_0x51285a);}}function _0x1fe5e4(_0x4068aa){_0x4068aa[a6_0x3127('0xe')]?_0x21b37f(_0x4068aa[a6_0x3127('0x1c')]):_0x2257ba(_0x4068aa[a6_0x3127('0x1c')])[a6_0x3127('0x10')](_0x4ca5ea,_0x453839);}_0x1fe5e4((_0xcb38f7=_0xcb38f7[a6_0x3127('0x15')](_0x179778,_0x4151f9||[]))[a6_0x3127('0x0')]());});};Object[a6_0x3127('0x2e')](exports,a6_0x3127('0x27'),{'value':!![]});exports[a6_0x3127('0x5')]=exports[a6_0x3127('0x1f')]=void 0x0;const axios_1=require(a6_0x3127('0xa'));const environment_1=require(a6_0x3127('0x26'));const metric_logger_1=require(a6_0x3127('0x2f'));const {output,unparse}=require(a6_0x3127('0xc'));class DistributedExecutionApi{constructor(_0x1b1504){this[a6_0x3127('0x2c')]=(0x0,axios_1[a6_0x3127('0x16')])(_0x1b1504);}['start'](_0x49f161){var _0x1f8b08;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x1c1362=(0x0,metric_logger_1[a6_0x3127('0x13')])(a6_0x3127('0x1e'));let _0x373978;try{_0x373978=yield(0x0,axios_1['axiosMultipleTries'])(()=>this['apiAxiosInstance'][a6_0x3127('0x12')](a6_0x3127('0x4'),_0x49f161));_0x1c1362['recordMetric']((0x0,metric_logger_1[a6_0x3127('0x18')])(_0x373978));}catch(_0x1a1789){_0x1c1362[a6_0x3127('0x25')](((_0x1f8b08=_0x1a1789===null||_0x1a1789===void 0x0?void 0x0:_0x1a1789['axiosException'])===null||_0x1f8b08===void 0x0?void 0x0:_0x1f8b08[a6_0x3127('0x19')])?(0x0,metric_logger_1[a6_0x3127('0x18')])(_0x1a1789[a6_0x3127('0x29')][a6_0x3127('0x19')]):metric_logger_1[a6_0x3127('0x6')]);throw _0x1a1789;}if(!_0x373978['data'][a6_0x3127('0x1d')]){throw new Error('Workspace\x20is\x20disabled.\x20Cannot\x20perform\x20distributed\x20task\x20executions.');}if(_0x373978[a6_0x3127('0x31')]['error']){throw new Error(_0x373978['data'][a6_0x3127('0x28')]);}return _0x373978[a6_0x3127('0x31')]['id'];});}[a6_0x3127('0x1a')](_0x4ea464){var _0x3f5ef4;return __awaiter(this,void 0x0,void 0x0,function*(){const _0xdb540a=(0x0,metric_logger_1['createMetricRecorder'])(a6_0x3127('0x1'));try{const _0x57339c=yield(0x0,axios_1[a6_0x3127('0x30')])(()=>this[a6_0x3127('0x2c')]['post'](a6_0x3127('0xb'),{'id':_0x4ea464}));_0xdb540a[a6_0x3127('0x25')]((0x0,metric_logger_1[a6_0x3127('0x18')])(_0x57339c));return _0x57339c[a6_0x3127('0x31')];}catch(_0x40b0cd){_0xdb540a[a6_0x3127('0x25')](((_0x3f5ef4=_0x40b0cd===null||_0x40b0cd===void 0x0?void 0x0:_0x40b0cd[a6_0x3127('0x29')])===null||_0x3f5ef4===void 0x0?void 0x0:_0x3f5ef4[a6_0x3127('0x19')])?(0x0,metric_logger_1[a6_0x3127('0x18')])(_0x40b0cd[a6_0x3127('0x29')]['response']):metric_logger_1[a6_0x3127('0x6')]);output['error']({'title':_0x40b0cd[a6_0x3127('0x2')]});process['exit'](0x1);}});}[a6_0x3127('0x17')](_0x47bf02,_0x15e3a1){var _0x54ccab;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x1464aa=(0x0,metric_logger_1[a6_0x3127('0x13')])(a6_0x3127('0x11'));try{const _0x1ccbec=yield(0x0,axios_1[a6_0x3127('0x30')])(()=>this[a6_0x3127('0x2c')]['post'](a6_0x3127('0x1b'),{'runGroup':_0x47bf02,'criticalErrorMessage':_0x15e3a1}),0x3);_0x1464aa['recordMetric']((0x0,metric_logger_1[a6_0x3127('0x18')])(_0x1ccbec));}catch(_0xb908c3){_0x1464aa['recordMetric'](((_0x54ccab=_0xb908c3===null||_0xb908c3===void 0x0?void 0x0:_0xb908c3[a6_0x3127('0x29')])===null||_0x54ccab===void 0x0?void 0x0:_0x54ccab[a6_0x3127('0x19')])?(0x0,metric_logger_1[a6_0x3127('0x18')])(_0xb908c3[a6_0x3127('0x29')]['response']):metric_logger_1[a6_0x3127('0x6')]);}});}}exports[a6_0x3127('0x1f')]=DistributedExecutionApi;function createStartRequest(_0x5057fa,_0x73533c,_0x5bdb68){const _0x2fb28e=_0x73533c[a6_0x3127('0x2b')](_0x22a5c8=>{return _0x22a5c8[a6_0x3127('0x2b')](_0x5dcce2=>{return{'taskId':_0x5dcce2['id'],'hash':_0x5dcce2[a6_0x3127('0x32')],'projectName':_0x5dcce2[a6_0x3127('0x2d')][a6_0x3127('0x34')],'target':_0x5dcce2[a6_0x3127('0x2d')]['target'],'configuration':_0x5dcce2[a6_0x3127('0x2d')][a6_0x3127('0x8')]||null,'params':unparse(_0x5dcce2[a6_0x3127('0x21')])[a6_0x3127('0x23')]('\x20')};});});const _0x22d5c5={'command':(0x0,environment_1[a6_0x3127('0x9')])(),'branch':(0x0,environment_1[a6_0x3127('0x2a')])(),'runGroup':_0x5057fa,'tasks':_0x2fb28e,'maxParallel':calculateMaxParallel(_0x5bdb68)};if(environment_1[a6_0x3127('0xd')]){_0x22d5c5[a6_0x3127('0x7')]=environment_1[a6_0x3127('0xd')];}if(!environment_1[a6_0x3127('0x20')]){_0x22d5c5[a6_0x3127('0x33')]=![];}return _0x22d5c5;}exports[a6_0x3127('0x5')]=createStartRequest;function calculateMaxParallel(_0x27f5ed){if(_0x27f5ed[a6_0x3127('0x24')]===a6_0x3127('0x22')||_0x27f5ed[a6_0x3127('0x24')]===![]){return 0x1;}else if(_0x27f5ed[a6_0x3127('0x24')]===a6_0x3127('0xf')||_0x27f5ed[a6_0x3127('0x24')]===!![]){return Number(_0x27f5ed[a6_0x3127('0x3')]||0x3);}else if(_0x27f5ed[a6_0x3127('0x24')]===undefined){return _0x27f5ed[a6_0x3127('0x3')]?Number(_0x27f5ed['maxParallel']):0x3;}else{return Number(_0x27f5ed[a6_0x3127('0x24')])||0x3;}}