const a2_0x5d73=['fileStorage','VERBOSE_LOGGING','Nx\x20Cloud:\x20Cache\x20miss\x20','defineProperty','hashUrls','done','remote-cache-hit','note','throw','then','all','__awaiter','forEach','status','statuses','filter','.\x20Status\x20404.','response','storeRequests','store','axiosException','requests','put','hash','get','../../../utilities/nx-imports','push','reduce','messages','retrieve','waitForStoreRequestsToComplete','Nx\x20Cloud:\x20Skipping\x20storing\x20','../../../utilities/environment','cacheError','CloudRemoteCache','__esModule','api','runContext','storage','cache-miss','next','extractErrorMessage','.\x20Read\x20only\x20token\x20is\x20used.'];(function(_0x29541e,_0x5d73ef){const _0x54d46c=function(_0x28c2d7){while(--_0x28c2d7){_0x29541e['push'](_0x29541e['shift']());}};_0x54d46c(++_0x5d73ef);}(a2_0x5d73,0x111));const a2_0x54d4=function(_0x29541e,_0x5d73ef){_0x29541e=_0x29541e-0x0;let _0x54d46c=a2_0x5d73[_0x29541e];return _0x54d46c;};'use strict';var __awaiter=this&&this[a2_0x54d4('0x27')]||function(_0x548dc7,_0x266104,_0x1243b4,_0x351ad0){function _0x30f9bd(_0x474039){return _0x474039 instanceof _0x1243b4?_0x474039:new _0x1243b4(function(_0x5b31f7){_0x5b31f7(_0x474039);});}return new(_0x1243b4||(_0x1243b4=Promise))(function(_0x25bbfb,_0x377594){function _0x3daa2e(_0x3261ac){try{_0x5a5274(_0x351ad0[a2_0x54d4('0x19')](_0x3261ac));}catch(_0x21b8ff){_0x377594(_0x21b8ff);}}function _0x1de98b(_0x1c40a5){try{_0x5a5274(_0x351ad0[a2_0x54d4('0x24')](_0x1c40a5));}catch(_0x24b501){_0x377594(_0x24b501);}}function _0x5a5274(_0xf6a72){_0xf6a72[a2_0x54d4('0x21')]?_0x25bbfb(_0xf6a72['value']):_0x30f9bd(_0xf6a72['value'])[a2_0x54d4('0x25')](_0x3daa2e,_0x1de98b);}_0x5a5274((_0x351ad0=_0x351ad0['apply'](_0x548dc7,_0x266104||[]))['next']());});};Object[a2_0x54d4('0x1f')](exports,a2_0x54d4('0x14'),{'value':!![]});exports[a2_0x54d4('0x13')]=void 0x0;const environment_1=require(a2_0x54d4('0x11'));const {output}=require(a2_0x54d4('0xa'));class CloudRemoteCache{constructor(_0x91fab3,_0x18cb03,_0x570d9b,_0x271b0e){this['messages']=_0x91fab3;this[a2_0x54d4('0x15')]=_0x18cb03;this[a2_0x54d4('0x16')]=_0x570d9b;this['fileStorage']=_0x271b0e;this[a2_0x54d4('0x3')]=[];}[a2_0x54d4('0xe')](_0x2030ec,_0x1e60f7){var _0x23353a;return __awaiter(this,void 0x0,void 0x0,function*(){if(this['messages'][a2_0x54d4('0x12')])return![];const _0x450a31=yield this[a2_0x54d4('0x20')](_0x2030ec);if(!_0x450a31||!_0x450a31[a2_0x54d4('0x9')]){if(environment_1[a2_0x54d4('0x1d')]){output[a2_0x54d4('0x23')]({'title':a2_0x54d4('0x1e')+_0x2030ec+'.'});}this[a2_0x54d4('0x16')]['statuses'][_0x2030ec]=a2_0x54d4('0x18');return![];}try{yield this[a2_0x54d4('0x1c')][a2_0x54d4('0xe')](_0x2030ec,_0x450a31[a2_0x54d4('0x9')],_0x1e60f7);this[a2_0x54d4('0x16')][a2_0x54d4('0x2a')][_0x2030ec]=a2_0x54d4('0x22');return!![];}catch(_0x4531d7){const _0x46dcf8=(_0x23353a=_0x4531d7[a2_0x54d4('0x5')])!==null&&_0x23353a!==void 0x0?_0x23353a:_0x4531d7;if(_0x46dcf8[a2_0x54d4('0x2')]&&_0x46dcf8['response'][a2_0x54d4('0x29')]===0x194){if(environment_1[a2_0x54d4('0x1d')]){output[a2_0x54d4('0x23')]({'title':'Nx\x20Cloud:\x20Cache\x20miss\x20'+_0x2030ec+a2_0x54d4('0x1')});}}else{this[a2_0x54d4('0xd')]['cacheError']=this[a2_0x54d4('0xd')][a2_0x54d4('0x1a')](_0x46dcf8,'storage');}this['runContext'][a2_0x54d4('0x2a')][_0x2030ec]='cache-miss';return![];}});}['store'](_0x46da4a,_0x2f4cc1){return __awaiter(this,void 0x0,void 0x0,function*(){if(this[a2_0x54d4('0xd')][a2_0x54d4('0x12')])return![];const _0xffb25e=Promise['resolve']()[a2_0x54d4('0x25')](()=>__awaiter(this,void 0x0,void 0x0,function*(){var _0x4a27f5;const _0x2b2e61=yield this[a2_0x54d4('0x20')](_0x46da4a);if(!_0x2b2e61)return![];if(!_0x2b2e61[a2_0x54d4('0x7')]){if(environment_1[a2_0x54d4('0x1d')]){output[a2_0x54d4('0x23')]({'title':a2_0x54d4('0x10')+_0x46da4a+a2_0x54d4('0x1b')});}return!![];}try{yield this['fileStorage'][a2_0x54d4('0x4')](_0x46da4a,_0x2b2e61[a2_0x54d4('0x7')],_0x2f4cc1);return!![];}catch(_0x21b18e){const _0x526fc8=(_0x4a27f5=_0x21b18e[a2_0x54d4('0x5')])!==null&&_0x4a27f5!==void 0x0?_0x4a27f5:_0x21b18e;this[a2_0x54d4('0xd')]['cacheError']=this['messages'][a2_0x54d4('0x1a')](_0x526fc8,a2_0x54d4('0x17'));return![];}}));this[a2_0x54d4('0x3')][a2_0x54d4('0xb')](_0xffb25e);return _0xffb25e;});}[a2_0x54d4('0x20')](_0x30341e){return __awaiter(this,void 0x0,void 0x0,function*(){if(_0x30341e in this[a2_0x54d4('0x16')][a2_0x54d4('0x6')]){return(yield this[a2_0x54d4('0x16')][a2_0x54d4('0x6')][_0x30341e])[_0x30341e];}else{const _0x52fe76=this[a2_0x54d4('0x16')]['scheduledTasks'][a2_0x54d4('0x0')](_0x34cae0=>!this['runContext'][a2_0x54d4('0x6')][_0x34cae0[a2_0x54d4('0x8')]])['map'](_0x3de70e=>_0x3de70e[a2_0x54d4('0x8')]);if(_0x52fe76['indexOf'](_0x30341e)===-0x1){_0x52fe76[a2_0x54d4('0xb')](_0x30341e);}const _0x1e7ce1=this[a2_0x54d4('0x15')]['startRun'](environment_1['NX_CLOUD_DISTRIBUTED_EXECUTION_ID'],_0x52fe76);_0x52fe76[a2_0x54d4('0x28')](_0x346280=>{this[a2_0x54d4('0x16')][a2_0x54d4('0x6')][_0x346280]=_0x1e7ce1;});return(yield _0x1e7ce1)[_0x30341e];}});}[a2_0x54d4('0xf')](){return Promise[a2_0x54d4('0x26')](this[a2_0x54d4('0x3')])['then'](_0x348bac=>_0x348bac[a2_0x54d4('0xc')]((_0x5685f8,_0x45b083)=>_0x5685f8&&_0x45b083,!![]));}}exports['CloudRemoteCache']=CloudRemoteCache;