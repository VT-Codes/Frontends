const a4_0x105f=['response','done','mapRespToPerfEntry','DistributedAgentApi','createMetricRecorder','../../../utilities/nx-imports','VERBOSE_LOGGING','dtePollTasks','__awaiter','throw','apiAxiosInstance','value','../../../utilities/environment','post','agentName','../../../utilities/metric-logger','runGroup','runGroup:\x20','../../../utilities/axios','note','/nx-cloud/executions/tasks','RUNNER_FAILURE_PERF_ENTRY','next','recordMetric','axiosException','axiosMultipleTries','tasks'];(function(_0x5ddbcf,_0x105f41){const _0x55964c=function(_0x3ebf04){while(--_0x3ebf04){_0x5ddbcf['push'](_0x5ddbcf['shift']());}};_0x55964c(++_0x105f41);}(a4_0x105f,0x1ee));const a4_0x5596=function(_0x5ddbcf,_0x105f41){_0x5ddbcf=_0x5ddbcf-0x0;let _0x55964c=a4_0x105f[_0x5ddbcf];return _0x55964c;};'use strict';var __awaiter=this&&this[a4_0x5596('0x0')]||function(_0x46307f,_0x197283,_0x383a0f,_0x1ca7b9){function _0xa1c2d3(_0x3243cf){return _0x3243cf instanceof _0x383a0f?_0x3243cf:new _0x383a0f(function(_0x59d0b8){_0x59d0b8(_0x3243cf);});}return new(_0x383a0f||(_0x383a0f=Promise))(function(_0x11620a,_0x215403){function _0xb4cfab(_0xc630c7){try{_0x3eb070(_0x1ca7b9[a4_0x5596('0xe')](_0xc630c7));}catch(_0x31c290){_0x215403(_0x31c290);}}function _0x35ef50(_0x44885b){try{_0x3eb070(_0x1ca7b9[a4_0x5596('0x1')](_0x44885b));}catch(_0x46ce1f){_0x215403(_0x46ce1f);}}function _0x3eb070(_0x3fcc3e){_0x3fcc3e[a4_0x5596('0x14')]?_0x11620a(_0x3fcc3e[a4_0x5596('0x3')]):_0xa1c2d3(_0x3fcc3e[a4_0x5596('0x3')])['then'](_0xb4cfab,_0x35ef50);}_0x3eb070((_0x1ca7b9=_0x1ca7b9['apply'](_0x46307f,_0x197283||[]))['next']());});};Object['defineProperty'](exports,'__esModule',{'value':!![]});exports[a4_0x5596('0x16')]=void 0x0;const axios_1=require(a4_0x5596('0xa'));const environment_1=require(a4_0x5596('0x4'));const metric_logger_1=require(a4_0x5596('0x7'));const {output}=require(a4_0x5596('0x18'));class DistributedAgentApi{constructor(_0x340738,_0x3971b0,_0x3e80fe){this['runGroup']=_0x3971b0;this['agentName']=_0x3e80fe;this[a4_0x5596('0x2')]=(0x0,axios_1['createApiAxiosInstance'])(_0x340738);}[a4_0x5596('0x12')](_0xf341e0,_0x42d22d,_0x5e5a1f){var _0x580a82;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x34e51f=(0x0,metric_logger_1['createMetricRecorder'])(a4_0x5596('0x1a'));try{const _0x1bb980=yield(0x0,axios_1[a4_0x5596('0x11')])(()=>this[a4_0x5596('0x2')][a4_0x5596('0x5')](a4_0x5596('0xc'),{'runGroup':this[a4_0x5596('0x8')],'agentName':this[a4_0x5596('0x6')],'executionId':_0xf341e0,'statusCode':_0x42d22d,'completedTasks':_0x5e5a1f}));_0x34e51f['recordMetric']((0x0,metric_logger_1[a4_0x5596('0x15')])(_0x1bb980));return _0x1bb980['data'];}catch(_0x57ba40){_0x34e51f[a4_0x5596('0xf')](((_0x580a82=_0x57ba40===null||_0x57ba40===void 0x0?void 0x0:_0x57ba40[a4_0x5596('0x10')])===null||_0x580a82===void 0x0?void 0x0:_0x580a82['response'])?(0x0,metric_logger_1[a4_0x5596('0x15')])(_0x57ba40['axiosException']['response']):metric_logger_1[a4_0x5596('0xd')]);throw _0x57ba40;}});}['completeRunGroupWithError'](_0x10c394){var _0x84d9ea;return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1[a4_0x5596('0x19')]){output[a4_0x5596('0xb')]({'title':'Completing\x20run\x20group\x20with\x20an\x20error','bodyLines':[a4_0x5596('0x9')+this['runGroup'],'error:\x20'+_0x10c394]});}const _0x5534c9=(0x0,metric_logger_1[a4_0x5596('0x17')])('completeRunGroup');try{const _0x4493f9=yield(0x0,axios_1[a4_0x5596('0x11')])(()=>this[a4_0x5596('0x2')][a4_0x5596('0x5')]('/nx-cloud/executions/complete-run-group',{'runGroup':this[a4_0x5596('0x8')],'agentName':this['agentName'],'criticalErrorMessage':_0x10c394}));if(environment_1['VERBOSE_LOGGING']){output[a4_0x5596('0xb')]({'title':'Completed\x20run\x20group\x20with\x20an\x20error'});}_0x5534c9['recordMetric']((0x0,metric_logger_1[a4_0x5596('0x15')])(_0x4493f9));}catch(_0x28f7c9){_0x5534c9[a4_0x5596('0xf')](((_0x84d9ea=_0x28f7c9===null||_0x28f7c9===void 0x0?void 0x0:_0x28f7c9[a4_0x5596('0x10')])===null||_0x84d9ea===void 0x0?void 0x0:_0x84d9ea[a4_0x5596('0x13')])?(0x0,metric_logger_1['mapRespToPerfEntry'])(_0x28f7c9[a4_0x5596('0x10')]['response']):metric_logger_1[a4_0x5596('0xd')]);console['error'](_0x28f7c9);}});}}exports['DistributedAgentApi']=DistributedAgentApi;